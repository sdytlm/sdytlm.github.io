# C Study Note

标签（空格分隔）： C

---

> I am strong because I've been weak. I am fearless because I've been afraid. I am wise because I've been foolish.

## 目录
[TOC]

## Chapter 1 - Tutorial Introduction

### Variables and Expression
* printf 的用法    
``` C
printf("%3d %6d\n", fahr, celsius); // %后面表示要输出的变量，有一个%，后面就得有一个变量. %后面的数字代表输出的最大长度，右对齐.

printf("%3d%6d\n", fahr, celsius); // 比上面少一个空格
```
Output:
``` C  
  3    -17
  4    -18
  5    -19
  6    -20
  7    -21
```
``` C
  3   -17
  4   -18
  5   -19
  6   -20
  7   -21
```
* printf 浮点数输出
``` C
float f = 3.0;
printf("%f\n",f-2); // float和int一起操作, int会被转换成float. 不管是+,-,*,/还是<>.
printf("%3.0f",f) // float总共3位,不算小数点和小数部分.
printf("%6.1f",f) // float总共6位包括小数点和小数点后的部分,小数点后1位
```
``` C
1.000000
  3
   3.0 
```

| 参数 | 解释 |
|-----|-------------------------|
| %d | Print as decimal integer |
| %o | octal |
| %x | hexadecimal |
| %c | character |
| %s | string |
| %6d | Print as decimal integer, at least 6 characters wide|
| %f | Print as float or double |
| %ld | Print as a long |
| %6f | Print as floating point, at least 6 characters wide|
| %.2f | Print as floating point, 2 characters after decimal point|
| %6.2f| Print as floating point, at least 6 wide and 2 after decimal point|

### 输入输出
* **getchar()**: read next input character from a text stream. Normally, the characters are from keyboard input.

    ``` c
        c = getchar();
    ```

* **putchar()**: print a character each time it is called. Usually, the output will appear in screen. 

    ``` c
        putchar(c);
    ```
    
* Get characters and put them on screen

    ``` c
        #include <stdio.h>
        int main() {
            int c       // 临时存储输入变量的是int型, 
            while ((c=getchar()) != EOF)    // EOF 是stdio.h中用define定义的文件结尾符.
                putchar(c);
        }
    ```
* 单引号‘ ’内的叫character constant. 其实在表达式中他对应着一个integer. 例如 'A' 对应65, '\n'对应10
* 统计输入文件的digits, white space, others
    
    ``` c
    #include< stdio.h>
    int main() {
        int c, i, nwhite, nother;
        int ndigit[10]; // 0-9 10个数
        for(i=0;i<10;++i)   
            ndigit[i] = 0; // 初始化ndigit
        while((c = getchar()) != EOF) {
            if(c>='0' && c<='9')    // char 可以比较
                ++ndight[c-'0'];    // c-'0'是个int值
            else if (c==' ' || c=='\n' || c=='\t') // 空白符
                ++nwhite;
            else // others
                ++nother;
        }
    }
    ```
    > char 在算数表达式里当成int用, '9'-'0'＝9

*  实现把最长的串拷贝出来

    ``` c
    #include <stdio.h>
    #define MAXLINE 1000
    
    int getline(char line[], int maxline);  // 读一行
    void copy(char to[], char from[]);      // copy一行
    
    int main() {
        int len;    // current line length
        int max;    // maximum length so far
        char line[MAXLINE];     // current input line
        char longest[MAXLINE];  // longest line saved here
        
        max = 0;
        while ((len = getline(line, MAXLINE)) > 0)
            if (len > max) {    // found longer line
                max = len;
                copy(longest, line);
            }
        printf("%s", longest)   // 输出
        return 0;
    }
    
    int getline (char s[], int lim) {
        int c,i;
        for(i=0;i<lim-1 && (c=getchar())!=EOF && c!='\n'; ++i) 
            s[i] = c;
            if(c == '\n') {     // 行尾
                s[i] = c;
                ++i
            }
            s[i] = '\0';        // 每一行都已\0做结束
            return i;
    }
    
    void copy(char top[], char from[]){
        int i;
        i = 0;
        while((to[i]=from[i]) != '\0')
            ++i;
    }
    ```

* 函数内变量和extern 变量的区别: extern变量不会随函数而消失

    ``` c
    #include<stdio.h>
    #define MAXLINE 1000
    
    char longest[MAXLINE];      // 先在函数外声明一次
    char line[MAXLINE];
    
    int main() {
        extern char longest[];  // 函数内还要再声明一次;
    
    ```
    > 若外部变量的定义在某个函数使用他之前，则不需要在函数中再次定义. 例如上面代码中main 里其实不用再次声明longest[].
    
    注意:
    > 若一个程序有多个文件, external variable definition is in file1, 但是file2 和 file3 使用这个变量. 必须要在file2 和 file3 显示的extern declaration 一次。
    
    再注意:
    > **Definition**: refers to the place where the variable is created or assigned storage
    **Declaration**: refers to places where the nature of the variable is stated but no storage is allocated.